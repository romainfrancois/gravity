<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Estimation Methods for Gravity Models • gravity</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><meta property="og:title" content="Estimation Methods for Gravity Models">
<meta property="og:description" content="A wrapper of different standard estimation methods for gravity models. 
  This package provides estimation methods for log-log models and multiplicative models.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">gravity</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.7.29</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/creating-gravity-datasets.html">Creating gravity datasets</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<div id="gravity" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#gravity" class="anchor"></a>gravity <img src="http://pacha.hk/gravity/apple.svg" width="150" align="right" alt="sticker">
</h1></div>

<div id="about" class="section level2">
<h2 class="hasAnchor">
<a href="#about" class="anchor"></a>About</h2>
<p>Gravity models are used to explain bilateral flows related to the sizes of bilateral partners, a measure of distance between them and other influences on interaction costs.</p>
<p>The underlying idea is rather simple. The greater the masses of two bodies and the smaller the distance between them, the stronger their attraction. This concept is applied to several research topics such as trade, migration or foreign direct investment. Even though their basic idea is rather simple, gravity models can become complex regarding the choice of models or estimation methods.</p>
<p>As especially for gravity beginners it is difficult to get an overview of the different methods and implement them in R, the package provides a wrapper of different standard estimation methods for gravity models. By considering the descriptions and codes of the estimation methods, users get a comprehensive and application-oriented overview of the different methods, see which method may be suitable for a certain research question or type of data and extend the code available to their research projects.</p>
<p>The package provides estimation methods for log-log models and multiplicative models.</p>
<p>Log-log estimation covers:</p>
<ul>
<li>Ordinary Least Squares (OLS)</li>
<li>Fixed Effects</li>
<li>Double Demeaning (DDM)</li>
<li>Bonus vetus OLS with simple averages (BVU) and with GDP-weights (BVW)</li>
<li>Structural Iterated Least Squares (SILS)</li>
<li>Tetrads</li>
<li>Different Tobit models (Tobit, ET-Tobit, EK-Tobit)</li>
</ul>
<p>Log-log models are partly complex to understand and program and thus a comparison of them is not straightforward, wherefore the package aims at easing an overview of the different methods combined with a direct application.</p>
<p>Multiplicative estimation covers:</p>
<ul>
<li>Poisson Pseudo Maximum Likelihood (PPML)</li>
<li>Gamma Pseudo Maximum Likelihood (GPML)</li>
<li>Negative Binomial Pseudo Maximum Likelihood (NBPML)</li>
<li>Nonlinear Least Squares (NLS)</li>
</ul>
<p>Multiplicative models are covered with a log-link and different families of distributions. These models are relatively easy to compute.</p>
<p>All functions named estimate gravity models, but they differ in whether they estimate them in their additive or multiplicative form, their requirements and assumptions with respect to data, their handling of Multilateral Resistance terms as well as their possibilities concerning the inclusion of unilateral independent variables. Therefore, they normally lead to different estimation results. We refer the user to the <a href="https://sites.google.com/site/hiegravity/">Gravity Cookbook website</a> for more information on gravity models in general.</p>
<p>(Head and Mayer 2014) provide a comprehensive and accessible overview of the theoretical and empirical development of the gravity literature as well as the use of gravity models and the various estimation methods, especially their merits and potential problems regarding applicability as well as different datasets. In order to have a straightforward application of all methods, the package comes with two example dataset, one including and the other one excluding zero trade flows.</p>
<p>Examples utilizing these dataset are included in the description of the methods. As the range of gravity models and their suitable estimation methods is huge and specific to data and research question at hand, the functions are kept simple such that researchers can utilize them as a starting point of their research and get familiar with them.</p>
<p>On the <a href="https://sites.google.com/site/hiegravity/">Gravity Cookbook website</a> Keith Head and Thierry Mayer provide Stata code for most methods. Where possible, the functions are tested to lead the same results as the Stata code when choosing the option of robust variance estimation. However, compared to the Stata code available, the functions presented in this package provide users with more flexibility regarding the type of estimation, the number and type of independent variables as well as the possible data.</p>
<p>Furthermore, additional functions are added. The functions of the package include distance as an independent variable. If a panel model is used time-invariant effects, such as geographical distance, may have to be excluded; see the respective descriptions. Therefore, it is up to the user to ensure that the functions can be applied to panel data.</p>
<p>Depending on the panel dataset and the variables - specifically the type of fixed effects - included in the model, it may easily occur that the model is not computable.</p>
<p>Depending on the specific model, the code of the respective function may has to be changed in order to exclude the distance variable from the estimation.</p>
<p>For a comprehensive overview of gravity models for panel data see (Egger and Pfaffermayr 2003), (Gómez-Herrera 2013) and (Head, Mayer, and Ries 2010) as well as the references therein (see also the references included in the descriptions of the different functions).</p>
<p>At the very least, the user should take special care with respect to the meaning of the estimated coefficients and variances as well as the decision about which effects to include in the estimation. As, to our knowledge at the moment, there is no explicit literature covering the estimation of a gravity equation by Double Demeaning, Structural Iterated Least Squares or Bonus vetus OLS using panel data, we do not recommend to apply these methods in this case.</p>
<p>Contributions, extensions and error corrections are very welcome. Please do not hesitate to contact us. We thank Martin Bresslein for valuable comments and advice on early versions of the package.</p>
</div>
<div id="todos" class="section level2">
<h2 class="hasAnchor">
<a href="#todos" class="anchor"></a>Todos</h2>
<div id="check-ols" class="section level3">
<h3 class="hasAnchor">
<a href="#check-ols" class="anchor"></a>Check OLS</h3>
<ul>
<li>
<span class="math display">\[ \]</span> Robust object is called but never used in the original function (line 233)</li>
</ul>
</div>
<div id="check-et-tobit" class="section level3">
<h3 class="hasAnchor">
<a href="#check-et-tobit" class="anchor"></a>Check ET Tobit</h3>
<ul>
<li>
<span class="math display">\[x\]</span> Warning that affects original and tidy function “Consider switching to a more robust optimisation method temporarily + In sqrt(diag(vc)) : NaNs produced” -&gt; <em>Solved switching from Newton-Rhapson to Simulated Annealing + starting from all betas equal to zero</em>
</li>
</ul>
</div>
<div id="vignettes" class="section level3">
<h3 class="hasAnchor">
<a href="#vignettes" class="anchor"></a>Vignettes</h3>
<ul>
<li>
<span class="math display">\[x\]</span> Reproduce examples</li>
<li>
<span class="math display">\[ \]</span> Usage</li>
<li>
<span class="math display">\[ \]</span> Articles</li>
</ul>
</div>
<div id="tidy-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#tidy-functions" class="anchor"></a>Tidy functions</h3>
<ul>
<li>
<span class="math display">\[x\]</span> bvu</li>
<li>
<span class="math display">\[x\]</span> bvw</li>
<li>
<span class="math display">\[x\]</span> ddm</li>
<li>
<span class="math display">\[x\]</span> ek tobit</li>
<li>
<span class="math display">\[x\]</span> et tobit</li>
<li>
<span class="math display">\[x\]</span> ols</li>
<li>
<span class="math display">\[x\]</span> tobit</li>
<li>
<span class="math display">\[x\]</span> robust summary</li>
<li>
<span class="math display">\[x\]</span> fixed effects</li>
<li>
<span class="math display">\[x\]</span> gpml</li>
<li>
<span class="math display">\[x\]</span> nbpml</li>
<li>
<span class="math display">\[x\]</span> nls</li>
<li>
<span class="math display">\[x\]</span> ppml</li>
<li>
<span class="math display">\[ \]</span> sils</li>
<li>
<span class="math display">\[ \]</span> tetrads</li>
</ul>
</div>
<div id="data" class="section level3">
<h3 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h3>
<ul>
<li>
<span class="math display">\[x\]</span> Reproduce examples data</li>
</ul>
</div>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<p>Egger, Peter, and Michael Pfaffermayr. 2003. “The Proper Panel Econometric Specification of the Gravity Equation: A Three-Way Model with Bilateral Interaction Effects.” <em>Empirical Economics</em> 28 (3): 571–80. <a href="doi:%5B10.1007/s001810200146%5D(https://doi.org/10.1007/s001810200146)" class="uri">doi:[10.1007/s001810200146](https://doi.org/10.1007/s001810200146)</a>.</p>
<p>Gómez-Herrera, Estrella. 2013. “Comparing Alternative Methods to Estimate Gravity Models of Bilateral Trade.” <em>Empirical Economics</em> 44 (3): 1087–1111. <a href="doi:%5B10.1007/s00181-012-0576-2%5D(https://doi.org/10.1007/s00181-012-0576-2)" class="uri">doi:[10.1007/s00181-012-0576-2](https://doi.org/10.1007/s00181-012-0576-2)</a>.</p>
<p>Head, Keith, and Thierry Mayer. 2014. “Chapter 3 - Gravity Equations: Workhorse,Toolkit, and Cookbook.” In <em>Handbook of International Economics</em>, edited by Gita Gopinath, Elhanan Helpman, and Kenneth Rogoff, 4:131–95. Handbook of International Economics. Elsevier. <a href="doi:%5Bhttps://doi.org/10.1016/B978-0-444-54314-1.00003-3%5D(https://doi.org/https://doi.org/10.1016/B978-0-444-54314-1.00003-3)" class="uri">doi:[https://doi.org/10.1016/B978-0-444-54314-1.00003-3](https://doi.org/https://doi.org/10.1016/B978-0-444-54314-1.00003-3)</a>.</p>
<p>Head, Keith, Thierry Mayer, and John Ries. 2010. “The Erosion of Colonial Trade Linkages After Independence.” <em>Journal of International Economics</em> 81 (1): 1–14. <a href="doi:%5Bhttps://doi.org/10.1016/j.jinteco.2010.01.002%5D(https://doi.org/https://doi.org/10.1016/j.jinteco.2010.01.002)" class="uri">doi:[https://doi.org/10.1016/j.jinteco.2010.01.002](https://doi.org/https://doi.org/10.1016/j.jinteco.2010.01.002)</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=gravity">https://​cloud.r-project.org/​package=gravity</a>
</li>
<li>Report a bug at <br><a href="NA">NA</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Anna-Lena Woelwer <br><small class="roles"> Author, maintainer </small>  </li>
<li>Jan Pablo Burgard <br><small class="roles"> Author </small>  </li>
<li>Joshua Kunst <br><small class="roles"> Author </small>  </li>
<li>Mauricio Vargas <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/pachamaltese/gravity"><img src="https://travis-ci.org/pachamaltese/gravity.svg?branch=master" alt="Travis-CI Build Status"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Anna-Lena Woelwer, Jan Pablo Burgard, Joshua Kunst, Mauricio Vargas.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
